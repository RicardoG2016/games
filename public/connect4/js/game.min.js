$(document).ready(function(){function n(a){return a.id.match(/\d/g).join("")}function o(a,c,d){if(3==a){b=!0,alert("You Win!")}else if(3==c){b=!0,alert("You Lose!")}}function q(a,b){var c=$("canvas").not(".bDisabled"),d=Math.floor(Math.random()*c.length),e=c[d],f=n(e),g=b;0==a[f].bDisabled?s(a,f,g):q(b)}function r(c,d,e,f){0==c[d].bDisabled&&0==b&&(c[d].bDisabled=!0,$(c[d]).addClass("bDisabled"),"player"==f?($(c[d]).addClass("player"),j[d-1]="x"):($(c[d]).addClass("cpu"),j[d-1]="y"),c[d].style.webkitTransform="rotateY(180deg)",c[d].style.opacity=.7,setTimeout(function(){m[d].beginPath(),m[d].lineWidth=1,m[d].arc(25,25,17,0,2*Math.PI,!1),m[d].fillStyle=e,m[d].fill(),m[d].strokeStyle=e,m[d].stroke(),m[d].closePath(),i=!1,console.log(i)},380),a++)}function s(a,b,c,d){for(var e=b;0==a[e].bDisabled;){var f=+e+7;"object"==typeof a[f]?1==a[f].bDisabled?r(a,e,c,d):e=f:r(a,e,c,d)}}function t(){setTimeout(function(){0==b&&(42==a&&(b=!0,alert("Draw!!")),v(j,f,g,h),u(j,f,g,h),w(j,f,g,h),x(j,f,g,h))},400)}function u(a,b,c,d){function e(a,b,c){this.col=c,this.val=a[b]}for(col=0;col<7;col++)for(row=0;row<6;row++){index=col+7*row;var f=new e(a,index,col);if("z"!=f.val&&"x"==d.val&&f.val==d.val&&f.col==d.col)b++;else if("z"!=f.val&&"y"==d.val&&f.val==d.val&&f.col==d.col)c++;else{var d=new e(a,index,col);b=0,c=0}o(b,c)}}function v(a,b,c,d){for(p=0;p<42;p++){var e=a[p];"z"!=e&&"x"==d&&e==d&&row==Math.floor(p/7)?b++:"z"!=e&&"y"==d&&e==d&&row==Math.floor(p/7)?c++:(d=e,row=Math.floor(p/7),b=0,c=0),o(b,c)}}function w(a,b,c,d){for(k=0;k<19;k++){var e=a[k],f=a[k+8],g=a[k+16],h=a[k+24];"x"==e&&e==f&&f==g&&g==h?b=3:"y"==e&&e==f&&f==g&&g==h?c=3:(b=0,c=0),o(b,c)}}function x(a,b,c,d){for(k=0;k<22;k++){var e=a[k],f=a[k+6],g=a[k+12],h=a[k+18];"x"==e&&e==f&&f==g&&g==h?b=3:"y"==e&&e==f&&f==g&&g==h?c=3:(b=0,c=0),o(b,c)}}for(var a=0,b=!1,c="#34495e",d="#f1c40f",e="player",f=0,g=0,h=0,i=!1,j=[],k=0;k<42;k++)j[k]="z";for(var l=[],k=1;k<43;k++)l[k]=document.getElementById("canvas"+k),l[k].bDisabled=!1;for(var m=[],k=1;k<43;k++)m[k]=l[k].getContext("2d");$("canvas").on("click",function(){var f=this;if(0==b&&0==f.bDisabled&&0==i){i=!0;var g=n(f);s(l,g,c,e),t(),i=!1}0==b&&a<42&&0==i&&(i=!0,setTimeout(function(a){q(l,d,b)},400)),t()})});